
#===============================
# üì¶ Carregando os pacotes
#===============================
library(tidyverse) # o ggplot esta dentro do tidyverse

#===============================
# üìÅ Lendo o dataset
#===============================
metabric <- read.csv('data/metabric.csv')

#===============================
# 1. GR√ÅFICO BOXPLOT B√ÅSICO
#===============================
## Aesthitics --> o mapeamento do que eu vou plotar
metabric %>% 
  ggplot(aes(x=Quimioterapia,y=Overall.Survival..Months.)) +
  geom_boxplot(outliers = F)

#===============================
# 2. AJUSTANDO TAMANHO E COR FIXA
#===============================
metabric %>% 
  ggplot(aes(x=Quimioterapia,y=Overall.Survival..Months.)) +
  geom_boxplot(outliers = F)

#===============================================
# 3. ADICIONANDO OS CASOS NO PLOT
#===============================================
metabric %>% 
  ggplot(aes(x=Quimioterapia,y=Overall.Survival..Months.)) +
  geom_jitter()+
  geom_boxplot(outliers = F)
  

#===============================================================
# 4. ADICIONANDO TRANSPAR√äNCIA NO BOXPLOT E AJUSTANDO PONTOS NO JITTER
#===============================================================

metabric %>% 
  ggplot(aes(x=Quimioterapia,y=Overall.Survival..Months.)) +
  geom_jitter(shape = 21, size = 1, width = 0.4)+
  geom_boxplot(outliers = F, alpha = 0.6)


#===========================================
# 5. ADICIONANDO R√ìTULOS E TEMA MAIS LIMPO
#===========================================

metabric %>% 
  ggplot(aes(x=Quimioterapia,y=Overall.Survival..Months.)) +
  geom_jitter(shape = 21, size = 1, width = 0.4)+
  geom_boxplot(outliers = F, alpha = 0.6) +
  labs(
    x = 'Quimioterapia',
    y = 'Sobreviv√™ncia geral (meses)'
  ) + 
  theme_classic()

#===========================================
# 6. CRIANDO OBJETO 'p' COM ESTILO DEFINIDO
#===========================================
## Alterando o n√≠vel das vari√°veis para ficar correto no gr√°fico

metabric <- metabric %>% 
  mutate(
    ER.Status = factor(ER.Status) %>% 
      fct_recode('ER negative' = 'Negative', 'ER positive' = 'Positive'),
    HER2.Status = factor(HER2.Status) %>%
      fct_recode('ER negative' = 'Negative', 'ER positive' = 'Positive')
  )

p <-   metabric %>% 
  ggplot(aes(x=Quimioterapia,y=Overall.Survival..Months.)) +
  geom_jitter(aes(size = Linfonodos.positivos.examinados), shape = 21, width = 0.4)+
  geom_boxplot(outliers = F, alpha = 0.6) +
  labs(
    x = 'Quimioterapia',
    y = 'Sobreviv√™ncia geral (meses)',
    size = 'Linfonodos positivos'
  ) + 
  theme_classic() +
    theme(
      legend.position = 'top',
    axis.title.x = element_text(size = 14, color = 'black'),
    axis.title.y = element_text(size = 14, color = 'black'),
    axis.text.x = element_text(size = 14),
    axis.text.y = element_text(size = 14)
  )
p
#===============================================
# 7. SUBDIVIS√ÉO POR STATUS DO RECEPTOR DE ESTROG√äNIO (ER)
#===============================================

p + facet_wrap(~ER.Status)
#=========================================
# 8. FACETANDO POR ER E HER2 SIMULTANEAMENTE
#=========================================
p + facet_wrap(ER.Status ~ HER2.Status)


